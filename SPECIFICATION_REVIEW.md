# –ê–Ω–∞–ª–∏–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

## üîç –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π

### ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:

1. **–í—Å–µ 5 —Å–µ—Ä–≤–∏—Å–æ–≤ —Å–æ–∑–¥–∞–Ω—ã** - Auth, Profile, Queue/Matchmaking, Game, Stats ‚úÖ
2. **Mono-repo —Å—Ç—Ä—É–∫—Ç—É—Ä–∞** - –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –≤ –æ–¥–Ω–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ ‚úÖ
3. **Gradle –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞** - build.gradle.kts ‚úÖ
4. **Spring Boot 3** - –≤–µ—Ä—Å–∏—è 3.5.0 ‚úÖ
5. **Java 17+** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Java 24 ‚úÖ
6. **Keycloak –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ Identity Provider ‚úÖ
7. **PostgreSQL –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞** - –æ—Ç–¥–µ–ª—å–Ω—ã–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö ‚úÖ
8. **Redis –¥–ª—è –æ—á–µ—Ä–µ–¥–∏** - –¥–æ–±–∞–≤–ª–µ–Ω –≤ docker-compose.yml ‚úÖ
9. **OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏** - –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∏–º–µ—é—Ç OpenAPI ‚úÖ
10. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - Prometheus, Grafana, Tempo, Loki ‚úÖ

---

## ‚ö†Ô∏è –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### 1. **–ü—É—Ç–∏ API - –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**

**–í —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ —É–∫–∞–∑–∞–Ω–æ:**
- `/api/auth/register`, `/api/auth/login`
- `/api/queue/join`, `/api/queue/leave`
- `/api/game/move`
- `/api/matches`
- `/api/profile`

**–í —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:**
- `/v1/auth/registration`, `/v1/auth/login`
- `/v1/queue/join`, `/v1/queue/leave`
- `/v1/game/move`
- `/v1/matches`
- `/v1/persons` (–≤–º–µ—Å—Ç–æ `/api/profile`)

**–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–∏—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é, —É–∫–∞–∑–∞–≤ —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ API —á–µ—Ä–µ–∑ –ø—Ä–µ—Ñ–∏–∫—Å `/v1/`. –≠—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç best practices –¥–ª—è API –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è.

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö:**
- –ó–∞–º–µ–Ω–∏—Ç—å `/api/` –Ω–∞ `/v1/` –≤–æ –≤—Å–µ—Ö –ø—É—Ç—è—Ö API
- –£–∫–∞–∑–∞—Ç—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ API

---

### 2. **API Gateway - –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**

**–í —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ —É–∫–∞–∑–∞–Ω–æ:**
- "–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å API Gateway (Nginx –∏–ª–∏ Spring Cloud Gateway) –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏, –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ rate-limiting"

**–í —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**
- API Gateway –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, —Å–µ—Ä–≤–∏—Å—ã –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞–ø—Ä—è–º—É—é –ø–æ —Ä–∞–∑–Ω—ã–º –ø–æ—Ä—Ç–∞–º

**–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é, —á—Ç–æ API Gateway —è–≤–ª—è–µ—Ç—Å—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–º —ç—Ç–∞–ø–µ. –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ Gateway –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö:**
- –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ: "API Gateway —è–≤–ª—è–µ—Ç—Å—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º. –í —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–µ—Ä–≤–∏—Å—ã –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞–ø—Ä—è–º—É—é. Gateway –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω –¥–ª—è production-—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è."

---

### 3. **–°–∏—Å—Ç–µ–º–∞ —Å–æ–æ–±—â–µ–Ω–∏–π RabbitMQ/Kafka - –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç**

**–í —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ —É–∫–∞–∑–∞–Ω–æ:**
- "–ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–∏—Å—Ç–µ–º—É —Å–æ–æ–±—â–µ–Ω–∏–π (RabbitMQ/Redis/Kafka) –¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏ —Å–æ–±—ã—Ç–∏–π –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏"
- "RabbitMQ –∏–ª–∏ Kafka –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –¥–æ—Å—Ç–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –º–µ–∂–¥—É –∏–Ω—Å—Ç–∞–Ω—Å–∞–º–∏"

**–í —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**
- –í docker-compose.yml –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ Redis
- RabbitMQ/Kafka –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç

**–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ, —á—Ç–æ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —ç—Ç–∞–ø–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ Redis. RabbitMQ/Kafka –º–æ–≥—É—Ç –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–∑–∂–µ –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è WebSocket –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏.

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö:**
- –£–∫–∞–∑–∞—Ç—å, —á—Ç–æ Redis –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ—á–µ—Ä–µ–¥–∏ –º–∞—Ç—á–º–µ–π–∫–∏–Ω–≥–∞
- –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ: "RabbitMQ/Kafka –º–æ–≥—É—Ç –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–º —ç—Ç–∞–ø–µ –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è WebSocket –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏"

---

### 4. **Profile Service —ç–Ω–¥–ø–æ–∏–Ω—Ç**

**–í —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ —É–∫–∞–∑–∞–Ω–æ:**
- `GET /api/profile` - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–æ—Ñ–∏–ª—å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: id, nickname, —Ä–µ–π—Ç–∏–Ω–≥, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

**–í —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**
- `person-service` –∏–º–µ–µ—Ç `/v1/persons` –¥–ª—è CRUD –æ–ø–µ—Ä–∞—Ü–∏–π —Å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- –≠–Ω–¥–ø–æ–∏–Ω—Ç `/api/profile` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç

**–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ:** –£—Ç–æ—á–Ω–∏—Ç—å –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏, —á—Ç–æ:
- `person-service` (`/v1/persons`) —Ö—Ä–∞–Ω–∏—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (email, nickname)
- `stats-service` (`/v1/stats`) –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏ —Ä–µ–π—Ç–∏–Ω–≥
- –≠–Ω–¥–ø–æ–∏–Ω—Ç `/api/profile` –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∫–∞–∫ –∞–≥—Ä–µ–≥–∏—Ä—É—é—â–∏–π —ç–Ω–¥–ø–æ–∏–Ω—Ç –≤ API Gateway –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω–æ–º BFF-—Å–µ—Ä–≤–∏—Å–µ, –∫–æ—Ç–æ—Ä—ã–π –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ `person-service` –∏ `stats-service`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö:**
- –£—Ç–æ—á–Ω–∏—Ç—å, —á—Ç–æ Profile Service —Ä–∞–∑–¥–µ–ª–µ–Ω –Ω–∞ –¥–≤–∞ —Å–µ—Ä–≤–∏—Å–∞:
  - `person-service` - –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
  - `stats-service` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ —Ä–µ–π—Ç–∏–Ω–≥
- –£–∫–∞–∑–∞—Ç—å, —á—Ç–æ `/api/profile` –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∫–∞–∫ –∞–≥—Ä–µ–≥–∏—Ä—É—é—â–∏–π —ç–Ω–¥–ø–æ–∏–Ω—Ç

---

### 5. **WebSocket –ø—É—Ç–∏**

**–í —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ —É–∫–∞–∑–∞–Ω–æ:**
- `/ws/queue` - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–∞–π–¥–µ–Ω–Ω–æ–º –º–∞—Ç—á–µ
- `/ws/game/{matchId}` - –∏–≥—Ä–æ–≤–∞—è —Å–µ—Å—Å–∏—è

**–í —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**
- WebSocket –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (spring-boot-starter-websocket)
- –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—É—Ç–∏ WebSocket –±—É–¥—É—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –ø—Ä–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ª–æ–≥–∏–∫–∏

**–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ:** –û—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å –≤ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏, —Ç–∞–∫ –∫–∞–∫ –ø—É—Ç–∏ WebSocket –±—É–¥—É—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –ø–æ–∑–∂–µ.

---

### 6. **–≠–Ω–¥–ø–æ–∏–Ω—Ç `/api/matches`**

**–í —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ —É–∫–∞–∑–∞–Ω–æ:**
- `GET /api/matches` - —Å–ø–∏—Å–æ–∫ –º–∞—Ç—á–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–≤ —Ä–∞–∑–¥–µ–ª–µ Profile Service –∏ Stats Service)

**–í —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**
- `stats-service` –∏–º–µ–µ—Ç `/v1/matches` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –º–∞—Ç—á–µ–π

**–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–∏—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é, —É–∫–∞–∑–∞–≤ —á—Ç–æ `/v1/matches` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ Stats Service, –∞ –Ω–µ –≤ Profile Service.

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö:**
- –£–±—Ä–∞—Ç—å `/api/matches` –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ Profile Service
- –û—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –≤ Stats Service –∫–∞–∫ `/v1/matches`

---

## üìù –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö

### 1. –û–±–Ω–æ–≤–∏—Ç—å "–ë—ç–∫–µ–Ω–¥‚Äë—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫.md":

```markdown
**1.–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–≥–æ –∫–∞—Ä–∫–∞—Å–∞**

- –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –∫–∞—Ä–∫–∞—Å –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ –Ω–∞ Spring Boot –ø–æ –¥–æ–º–µ–Ω–∞–º: Auth, Profile, Queue/Matchmaking, Game, Stats. –ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –∏–º–µ–µ—Ç —Å–≤–æ—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —á–µ—Ä–µ–∑ REST –∏ —Å–æ–±—ã—Ç–∏—è.

- **API Gateway (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)**: –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å API Gateway (Nginx –∏–ª–∏ Spring Cloud Gateway) –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏, –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ rate-limiting. –í —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–µ—Ä–≤–∏—Å—ã –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞–ø—Ä—è–º—É—é –ø–æ —Ä–∞–∑–Ω—ã–º –ø–æ—Ä—Ç–∞–º. Gateway –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω –¥–ª—è production-—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è.

- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ö—Ä–∞–Ω–∏–ª–∏—â–∞: PostgreSQL –¥–ª—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, Redis –¥–ª—è –æ—á–µ—Ä–µ–¥–µ–π –∏ –∫—ç—à–∞.

- **–°–∏—Å—Ç–µ–º–∞ —Å–æ–æ–±—â–µ–Ω–∏–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)**: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–∏—Å—Ç–µ–º—É —Å–æ–æ–±—â–µ–Ω–∏–π (RabbitMQ/Kafka) –¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏ —Å–æ–±—ã—Ç–∏–π –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏. –í —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Redis –¥–ª—è –æ—á–µ—Ä–µ–¥–∏ –º–∞—Ç—á–º–µ–π–∫–∏–Ω–≥–∞. RabbitMQ/Kafka –º–æ–≥—É—Ç –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–º —ç—Ç–∞–ø–µ –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è WebSocket –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π.
```

### 2. –û–±–Ω–æ–≤–∏—Ç—å "–°–∏—Å—Ç–µ–º–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏–≥—Ä—ã ¬´–ë–æ–π—Ü–æ–≤—Å–∫–∏–π –∫–ª—É–±¬ª.md":

**–í —Ä–∞–∑–¥–µ–ª–µ "API –∏ —Å–æ–±—ã—Ç–∏—è" –æ–±–Ω–æ–≤–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É:**

|–ú–µ—Ç–æ–¥|–°–µ—Ä–≤–∏—Å|–û–ø–∏—Å–∞–Ω–∏–µ|
|---|---|---|
|`POST /v1/auth/registration`|Auth Service|–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ü–µ—Ä–µ–¥–∞—ë—Ç `email`, `password`, `nickname`. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `userId` –∏ JWT. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–∞—Ä–æ–ª—å –Ω–∞ —É—Ç–µ—á–∫–∏ –∏ —Å–∏–ª—É.|
|`POST /v1/auth/login`|Auth Service|–í—Ö–æ–¥. –ü—Ä–∏–Ω–∏–º–∞–µ—Ç `email` –∏ `password`, –≤—ã–¥–∞—ë—Ç JWT/refresh token.|
|`GET /v1/persons/{id}`|Profile Service|–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: id, email, nickname.|
|`GET /v1/stats`|Stats Service|–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: —Ä–µ–π—Ç–∏–Ω–≥, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ–±–µ–¥/–ø–æ—Ä–∞–∂–µ–Ω–∏–π.|
|`POST /v1/queue/join`|Matchmaking Service|–î–æ–±–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –æ—á–µ—Ä–µ–¥—å. –û—Ç–≤–µ—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ–º `waiting`.|
|`POST /v1/queue/leave`|Matchmaking Service|–£–¥–∞–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –æ—á–µ—Ä–µ–¥–∏.|
|`POST /v1/game/move`|Game Service|–ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Ö–æ–¥ (`matchId`, `attackTarget`, `defenseTarget`, `turnNumber`). –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ.|
|`GET /v1/matches`|Stats Service|–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –ø—Ä–æ—à–ª—ã—Ö –º–∞—Ç—á–µ–π (–¥–∞—Ç–∞, —Å–æ–ø–µ—Ä–Ω–∏–∫, —Ä–µ–∑—É–ª—å—Ç–∞—Ç).|

**–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ API —á–µ—Ä–µ–∑ –ø—Ä–µ—Ñ–∏–∫—Å `/v1/`
- Profile Service —Ä–∞–∑–¥–µ–ª–µ–Ω –Ω–∞ –¥–≤–∞ —Å–µ—Ä–≤–∏—Å–∞: `person-service` (–ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ) –∏ `stats-service` (—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)
- –≠–Ω–¥–ø–æ–∏–Ω—Ç `/api/profile` –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∫–∞–∫ –∞–≥—Ä–µ–≥–∏—Ä—É—é—â–∏–π —ç–Ω–¥–ø–æ–∏–Ω—Ç –≤ API Gateway

### 3. –û–±–Ω–æ–≤–∏—Ç—å "–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è –∏–≥—Ä—ã ¬´–ë–æ–π—Ü–æ–≤—Å–∫–∏–π –∫–ª—É–±¬ª (—Ñ—Ä–æ–Ω—Ç‚Äë—ç–Ω–¥ –∏ –±—ç–∫‚Äë—ç–Ω–¥).md":

**–í —Ä–∞–∑–¥–µ–ª–µ "4.3 REST / WebSocket API" –æ–±–Ω–æ–≤–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É:**

|–ú–µ—Ç–æ–¥ / –ø—É—Ç—å|–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞|–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞|–û—Ç–≤–µ—Ç|
|---|---|---|
|`POST /v1/auth/registration`|–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è.|`{email, password, nickname}`|201 Created. `{userId, token}` –ª–∏–±–æ –æ—à–∏–±–∫–∞.|
|`POST /v1/auth/login`|–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É.|`{email, password}`|200 OK. `{token}` –∏–ª–∏ –æ—à–∏–±–∫–∞.|
|`POST /v1/queue/join`|–ü–æ–º–µ—Å—Ç–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –æ—á–µ—Ä–µ–¥—å.|–ó–∞–≥–æ–ª–æ–≤–æ–∫ Authorization —Å —Ç–æ–∫–µ–Ω–æ–º.|200 OK. `{message: "waiting"}`. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–∞–π–¥–µ–Ω–Ω–æ–º –º–∞—Ç—á–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ WebSocket.|
|`POST /v1/queue/leave`|–í—ã—Ö–æ–¥ –∏–∑ –æ—á–µ—Ä–µ–¥–∏.|‚Äî|200 OK.|
|`GET /v1/persons/{id}`|–ü–æ–ª—É—á–∏—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.|‚Äî|200 OK. `{id, email, nickname}`.|
|`GET /v1/stats`|–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.|–ü–∞—Ä–∞–º–µ—Ç—Ä—ã: `userId` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)|200 OK. `{wins, losses, rating, ...}`.|
|`GET /v1/matches`|–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –º–∞—Ç—á–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.|–ü–∞—Ä–∞–º–µ—Ç—Ä—ã: `userId` (–ø–æ —Ç–æ–∫–µ–Ω—É), `from`, `to`, `page`, `size`|200 OK. –°–ø–∏—Å–æ–∫ –º–∞—Ç—á–µ–π.|
|`POST /v1/game/move`|–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ö–æ–¥.|`{matchId, attackTarget, defenseTarget, turnNumber}`|202 Accepted. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ö–æ–¥–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–µ—Ä–≤–µ—Ä–æ–º; —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ WebSocket.|

**–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ –æ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏:**
- –í—Å–µ API –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø—Ä–µ—Ñ–∏–∫—Å `/v1/` –¥–ª—è –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- Profile Service —Ä–∞–∑–¥–µ–ª–µ–Ω: –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ `person-service`, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ `stats-service`

---

## ‚úÖ –ò—Ç–æ–≥–æ–≤—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–û–±–Ω–æ–≤–∏—Ç—å –ø—É—Ç–∏ API** - –∑–∞–º–µ–Ω–∏—Ç—å `/api/` –Ω–∞ `/v1/` –≤–æ –≤—Å–µ—Ö –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö
2. **–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—á–∞–Ω–∏—è –æ–± –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö** - API Gateway, RabbitMQ/Kafka
3. **–£—Ç–æ—á–Ω–∏—Ç—å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ Profile Service** - –Ω–∞ person-service –∏ stats-service
4. **–û—Å—Ç–∞–≤–∏—Ç—å WebSocket –ø—É—Ç–∏ –∫–∞–∫ –µ—Å—Ç—å** - –æ–Ω–∏ –±—É–¥—É—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –ø–æ–∑–∂–µ

–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å —É—á–µ—Ç–æ–º –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è API –∏ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏.
